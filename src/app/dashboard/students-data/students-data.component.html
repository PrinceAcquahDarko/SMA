
<div >
  <mat-form-field  *ngIf = "combinedSubjects$ | async" >
    <mat-label>Filter</mat-label>
    <input matInput  placeholder="Ex. ium" #input> 
    <!-- (keyup)="applyFilter($event)" -->
  </mat-form-field>
  
  <table mat-table [dataSource]="classData$ | async" class="mat-elevation-z8" *ngIf = "combinedSubjects$ | async as p;">
  
  
    <!-- Name Column -->
    <ng-container matColumnDef="FIRSTNAME">
      <th mat-header-cell *matHeaderCellDef> FIRSTNAME </th>
      <td mat-cell *matCellDef="let element; let i = index" (click)="openReport(element, i)">{{element.firstname}} </td>
    </ng-container>
  
    <ng-container matColumnDef="LASTNAME">
      <th mat-header-cell *matHeaderCellDef> LASTNAME </th>
      <td mat-cell *matCellDef="let element">{{element.lastname}} </td>
    </ng-container>
    <div   *ngFor = "let sub of p | slice:2: [p.length -1]" >
      <ng-container  matColumnDef="{{sub}}">
  
          <th mat-header-cell *matHeaderCellDef> {{sub}} </th>
          <!-- <th mat-header-cell *matHeaderCellDef> {{sub}} </th> -->
          <td mat-cell *matCellDef="let element"> {{element[sub]?.classScore | convertToGrades}}</td>
          <!-- <td mat-cell *matCellDef="let element"> {{element[sub]?.examScore}}  </td> -->
          <!-- <td mat-cell *matCellDef="let element"> </td> -->
  
      </ng-container>
  </div>

  <ng-container matColumnDef="TOTALSCORE">
    <th mat-header-cell *matHeaderCellDef> TOTALSCORE </th>
    <td mat-cell *matCellDef="let element">{{element.grandScore}} </td>
  </ng-container>
  
      
  
    <tr mat-header-row *matHeaderRowDef="p"></tr>
    <tr mat-row *matRowDef="let row; columns: p;"></tr>
  
    <!-- Row shown when there is no matching data. -->
    <tr class="mat-row" *matNoDataRow>
      <!-- <td class="mat-cell" colspan="4">No data matching the filter "{{input.value}}"</td> -->
    </tr>
  </table>
</div>

